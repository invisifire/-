# 1 特征筛选

## 1.1 去除100%不可用特征

### 1.1.1 根据类别字段是否过于细分的类别去除

此部分暂时采用魔数智擎的方案，计算偏离值（魔数自己起的名字搜索不到）

偏离值计算公式：

loss=log(变量非空数量)/log(2)/(变量类别数-1)     偏离度=0  if loss>1 else (1-loss)

参考[目标特征与所有特征的线性相关表.csv](./目标特征与所有特征的线性相关表.csv)

可以发现界限并不明显，不好划分必定去除的界限。为防止误删暂定0.98为分界线**因此存疑，需要另寻符合需求的算法，或者需要在类别编码时，将数量少的类别进行一些融合。**

### 1.1.2 根据特征完整度进行去除

参考[目标特征与所有特征的线性相关表.csv](./目标特征与所有特征的线性相关表.csv) 

界限同样难以划分，因此应当暂时定界限为0.001，因为要删除的是信息含量低的，一般情况下在模型重要度计算时能删除有关特征。

### 1.1.3 根据是否强相关去除

对比线性相关算法

| 分析方法 | 数据类型                           | 数据分布 | 数据间的关系 |
| -------- | ---------------------------------- | -------- | ------------ |
| pearson  | 数值和数值                         | 正态分布 | 线性         |
| spearman | 数值和数值；数值和分类；分类和分类 | 不做要求 | 不做要求     |
| kendall  | 数值和数值；数值和分类；分类和分类 | 不作要求 | 不做要求     |

*pearson算法的数据对分类类型进行编码

锁定状态、线索阶段、转换周期，三个与状态强相关字段

实验结果[目标特征与所有特征的线性相关表.csv](./目标特征与所有特征的线性相关表.csv)

| 分析方法 | 实际表现                                                     |
| -------- | ------------------------------------------------------------ |
| pearson  | 排名靠前的几个值均不为强相关字段                             |
| spearman | 大于80%的值包含全部三个强相关，且分界线较为明显，但是也包含（线索类别）高度空缺会导致相关度变高 |
| kendall  | 与spearman类似分界线同样为80%，计算开销更大                  |
| 自编写LC | 大于99%，一定是包含目标信息的字段，分界线不会有误分情况      |

综合结论，因为字段中含有大量的空缺特征，因此无法划分分界线保障结果，因此针对空缺信息提取的线性相关算法，简称LC，linear_categorical，此算法得出的是特征与目标特征的信息是否为包含关系，（例如唯一id一定包含其他所有信息即可以通过唯一id去确定市场类型的值）因为LC算法的分界线为99%误分类几率小因此选用自编算法

### 1.1.4 去除日期类型变量

因为日期类型变量不应当作为线索评分的参考，未来如果有公司近况舆论分析模块，才考虑使用日期作为输入变量。

### 1.1.5 去除含人名信息的变量

此类数据有可能会让模型效果更好，但是评分系统应当作为线索本身的描述而非销售的因素，一般情况下人名信息为联系人or分配销售信息这部分应当去除单独考虑，高成交率联系人不需要系统帮助销售记录。

### 1.1.6 去除（初步试训模型）贡献值为0的特征

特征的贡献值是由树模型分叉的算法信息熵（简化为基尼指数）计算而来，一些超参数的剪枝会使得贡献变小，因此初步试训模型时强化学习能力，不考虑过拟合的情况下得出贡献值为0的特征，对于剪枝后的模型一定无用，

注：此处参考基础知识介绍中cart决策树的介绍，剪枝是为了增加模型泛化性。

### 1.1.7 去除同含义变量

存在同含义变量但是，细分程度不同，例如一级产业二级产业，需人工判断去除

### 1.1.8 识别特征启用时间，去除中途新建特征

训练集选用1-7月的数据，但是存在一个字段4月份才开始使用（一直存在），应当去除保证空缺值有含义，或进行特殊编码也可。

### 1.1.9 全局刷新改变的计算字段

若模型训练数据后，由于评分规则发生变化（如线索等级这个字段），导致模型性能下降



## 1.2 提供特征去除推荐

1.1.7和1.1.8是否应当让客户选择是否删除



参考、线性相关度、完整度（空缺度）、偏离值、模型贡献值。

## 1.3 人为剔除无关特征

给出说明文档如：删除信息填写在线索转化之后的字段。

## 1.4 特征融合





# 2 类别特征编码

## 2.1 简单连续正整数编码

## 2.2 融合语义的特征编码



# 3 超参数优化

## 3.1 网格搜索

## 3.2 贝叶斯搜索



# 4 其他

## 4.1 模型是否可用评判

psi评价

## 4.2 训练集、测试集划分方法

## 数据量对于上述过程的影响

